import { GoogleGenerativeAI } from "@google/generative-ai";

  const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan for Location : Las Vegas, for 3 Days for Couple with a Cheap budget. Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and  suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format.\n"},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "Okay, here's a budget-friendly 3-day Las Vegas itinerary for a couple, along with hotel options and a detailed JSON format response.  This plan focuses on free activities, affordable eats, and minimizing costs.\n\n```json\n{\n  \"tripDetails\": {\n    \"location\": \"Las Vegas, Nevada\",\n    \"duration\": \"3 Days\",\n    \"budget\": \"Cheap/Budget-Friendly\",\n    \"travelers\": \"Couple\"\n  },\n  \"hotelOptions\": [\n    {\n      \"hotelName\": \"Circus Circus Hotel & Casino\",\n      \"hotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"$30 - $70/night (depending on season and promotions)\",\n      \"hotelImageUrl\": \"https://www.circuscircus.com/wp-content/uploads/2023/04/Circus-Circus-Hotel-Las-Vegas-Exterior-Night.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1298,\n        \"longitude\": -115.1688\n      },\n      \"rating\": 3.5,\n      \"description\": \"A classic Las Vegas hotel known for its affordability and family-friendly attractions (Adventuredome indoor theme park, free circus acts). Rooms are basic but clean. Expect crowds and noise.\"\n    },\n    {\n      \"hotelName\": \"Excalibur Hotel & Casino\",\n      \"hotelAddress\": \"3850 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"$40 - $80/night (depending on season and promotions)\",\n      \"hotelImageUrl\": \"https://www.excalibur.com/content/dam/MGM/Excalibur/property-details/exterior/excalibur-exterior-day.tif\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.0983,\n        \"longitude\": -115.1744\n      },\n      \"rating\": 4.0,\n      \"description\": \"A medieval-themed hotel on the south end of the Strip.  Offers affordable rooms and various dining options.  Good location for exploring the southern Strip attractions.  Has a pool area.\"\n    },\n   {\n      \"hotelName\": \"Stratosphere Hotel, Casino & Tower\",\n      \"hotelAddress\": \"2000 S Las Vegas Blvd, Las Vegas, NV 89104\",\n      \"price\": \"$40 - $90/night (depending on season and promotions)\",\n      \"hotelImageUrl\": \"https://media-cdn.tripadvisor.com/media/photo-s/1b/48/96/9d/the-strat-hotel-casino.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1454,\n        \"longitude\": -115.1557\n      },\n      \"rating\": 3.8,\n      \"description\": \"Located further north on the Strip, this hotel offers great views from its tower.  Rooms are generally affordable.  Consider transportation costs to other Strip attractions.  Thrill rides at the top are extra.\"\n    }\n\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"theme\": \"South Strip Exploration & Free Entertainment\",\n      \"bestTimeToVisit\": \"Morning/Afternoon for outdoor activities, Evening for shows\",\n      \"activities\": [\n        {\n          \"placeName\": \"Welcome to Las Vegas Sign\",\n          \"placeDetails\": \"Iconic sign for a photo opportunity. Be prepared for a short wait.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e5/Welcome_to_Las_Vegas_sign.JPG/1280px-Welcome_to_Las_Vegas_sign.JPG\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0828,\n            \"longitude\": -115.1731\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.5,\n          \"timeTravel\": \"15-20 minutes (depending on traffic, from central strip hotels)\"\n        },\n        {\n          \"placeName\": \"Bellagio Conservatory & Botanical Garden\",\n          \"placeDetails\": \"Beautiful seasonal floral displays. A free and stunning attraction.\",\n          \"placeImageUrl\": \"https://www.bellagio.com/content/dam/MGM/Bellagio/entertainment/conservatory-botanical-garden/bellagio-conservatory-garden-hero.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1126,\n            \"longitude\": -115.1762\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.8,\n          \"timeTravel\": \"Walking distance from many central Strip hotels\"\n        },\n        {\n          \"placeName\": \"Bellagio Fountain Show\",\n          \"placeDetails\": \"Spectacular water show choreographed to music. Shows run frequently in the afternoon and evening.\",\n          \"placeImageUrl\": \"https://www.visitlasvegas.com/wp-content/uploads/2023/02/bellagio-fountains-at-night-scaled.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1129,\n            \"longitude\": -115.1754\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.7,\n          \"timeTravel\": \"Adjacent to the Bellagio Conservatory\"\n        },\n        {\n          \"placeName\": \"Explore the LINQ Promenade\",\n          \"placeDetails\": \"Outdoor shopping, dining, and entertainment district.  Window shop and enjoy the atmosphere.\",\n          \"placeImageUrl\": \"https://www.caesars.com/content/dam/linq/things-to-do/linq-promenade/the-linq-promenade-overview-desktop.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1168,\n            \"longitude\": -115.1691\n          },\n          \"ticketPricing\": \"Free (activities and dining cost extra)\",\n          \"rating\": 4.3,\n          \"timeTravel\": \"Walking distance from the Bellagio (or short taxi/rideshare)\"\n        },\n        {\n          \"placeName\": \"Free Circus Acts at Circus Circus\",\n          \"placeDetails\": \"Enjoy free circus performances throughout the day.\",\n          \"placeImageUrl\": \"https://www.circuscircus.com/wp-content/uploads/2019/06/CC_Midway-Circus_1920x810.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1298,\n            \"longitude\": -115.1688\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 3.8,\n          \"timeTravel\": \"Taxi/Rideshare from LINQ Promenade (or walk if you're up for it)\"\n        }\n      ],\n      \"foodSuggestions\": [\n        \"In-N-Out Burger (for an affordable and classic California burger experience)\",\n        \"Secret Pizza at Cosmopolitan (late-night, hidden pizza joint)\",\n        \"Ocean One Bar & Grille at Miracle Mile Shops (cheap lunch specials)\"\n      ]\n    },\n    \"day2\": {\n      \"theme\": \"Downtown Las Vegas & Fremont Street Experience\",\n      \"bestTimeToVisit\": \"Afternoon/Evening for the Fremont Street Experience\",\n      \"activities\": [\n        {\n          \"placeName\": \"Fremont Street Experience\",\n          \"placeDetails\": \"Light and sound show on a massive video screen canopy. Free entertainment, street performers, and casinos.\",\n          \"placeImageUrl\": \"https://www.vegasexperience.com/wp-content/uploads/2023/04/fremont-street-experience-homepage-hero.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1703,\n            \"longitude\": -115.1424\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.6,\n          \"timeTravel\": \"Taxi/Rideshare from the Strip (allow 20-30 minutes)\"\n        },\n        {\n          \"placeName\": \"SlotZilla Zip Line\",\n          \"placeDetails\": \"Optional: Zip line over Fremont Street for a thrilling experience (costs extra).\",\n          \"placeImageUrl\": \"https://www.vegasexperience.com/wp-content/uploads/2017/06/slotzilla-lower-zoomline-at-night.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1701,\n            \"longitude\": -115.1428\n          },\n          \"ticketPricing\": \"$39-$49 (optional)\",\n          \"rating\": 4.2,\n          \"timeTravel\": \"Located on Fremont Street\"\n        },\n        {\n          \"placeName\": \"Downtown Container Park\",\n          \"placeDetails\": \"Unique outdoor shopping and entertainment area built from shipping containers.\",\n          \"placeImageUrl\": \"https://downtowncontainerpark.com/wp-content/uploads/2017/08/1-07_DCP_HeroShot_1920x1080-1024x576.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1672,\n            \"longitude\": -115.1404\n          },\n          \"ticketPricing\": \"Free (activities and dining cost extra)\",\n          \"rating\": 4.4,\n          \"timeTravel\": \"Walking distance from Fremont Street\"\n        },\n          {\n            \"placeName\": \"Mob Museum\",\n            \"placeDetails\": \"Explore the history of organized crime.\",\n            \"placeImageUrl\": \"https://themobmuseum.org/wp-content/uploads/2019/05/IMG_4293.jpg\",\n            \"geoCoordinates\": {\n              \"latitude\": 36.1712,\n              \"longitude\": -115.1401\n            },\n            \"ticketPricing\": \"$29.95 (Check for discounts)\",\n            \"rating\": 4.5,\n            \"timeTravel\": \"Short walk from Fremont Street\"\n          }\n      ],\n      \"foodSuggestions\": [\n        \"Heart Attack Grill (if you dare - very cheap, but controversial)\",\n        \"Eat (highly-rated brunch spot, slightly pricier but worth it)\",\n        \"Pizza Rock (delicious pizza with a variety of styles)\"\n      ]\n    },\n    \"day3\": {\n      \"theme\": \"High Roller Observation Wheel & Exploring The Strip (North)\",\n      \"bestTimeToVisit\": \"Afternoon/Evening for the High Roller\",\n      \"activities\": [\n        {\n          \"placeName\": \"High Roller Observation Wheel\",\n          \"placeDetails\": \"Enjoy panoramic views of Las Vegas from the world's tallest observation wheel.\",\n          \"placeImageUrl\": \"https://www.caesars.com/content/dam/linq/things-to-do/high-roller/the-linq-high-roller-observation-wheel-exterior-day.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1165,\n            \"longitude\": -115.1695\n          },\n          \"ticketPricing\": \"$25-$37 (depending on time of day and discounts; book in advance online)\",\n          \"rating\": 4.4,\n          \"timeTravel\": \"Located at the LINQ Promenade\"\n        },\n        {\n          \"placeName\": \"Venetian & Palazzo Canals & Streetmosphere\",\n          \"placeDetails\": \"Explore the replica canals of Venice and enjoy the free street performances.\",\n          \"placeImageUrl\": \"https://www.vegas.com/wp-content/uploads/2018/05/venetian-gondola-ride-1.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1214,\n            \"longitude\": -115.1741\n          },\n          \"ticketPricing\": \"Free (Gondola rides cost extra)\",\n          \"rating\": 4.6,\n          \"timeTravel\": \"Taxi/Rideshare from the High Roller (or walk if you're up for it)\"\n        },\n        {\n          \"placeName\": \"Mirage Volcano\",\n          \"placeDetails\": \"Free volcano show that erupts with fire and smoke.\",\n          \"placeImageUrl\": \"https://assets.mgmresorts.com/content/dam/MGM/mirage/entertainment/volcano/mirage-volcano-exterior-night.tif\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1212,\n            \"longitude\": -115.1754\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.5,\n          \"timeTravel\": \"Walking distance from the Venetian/Palazzo\"\n        },\n        {\n          \"placeName\": \"Walk the Strip & People Watching\",\n          \"placeDetails\": \"Simply stroll along the Strip, taking in the sights and sounds.  A classic Las Vegas experience.\",\n          \"placeImageUrl\": \"https://i.insider.com/605a2a06d03f940018624795?width=1136&format=jpeg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1146,\n            \"longitude\": -115.1728\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.3,\n          \"timeTravel\": \"Anywhere on the Strip!\"\n        }\n      ],\n      \"foodSuggestions\": [\n        \"White Castle (for a nostalgic slider experience)\",\n        \"Grand Lux Cafe (slightly more upscale, but offers large portions and reasonable prices)\",\n        \"Taco Bell Cantina (for a fun and affordable twist on classic Taco Bell)\"\n      ]\n    }\n  },\n  \"budgetTips\": [\n    \"Walk as much as possible to avoid transportation costs.\",\n    \"Take advantage of free attractions and entertainment.\",\n    \"Eat at affordable restaurants and fast-food chains.\",\n    \"Buy alcohol at a liquor store instead of at bars.\",\n    \"Look for happy hour specials and drink deals.\",\n    \"Consider a monorail pass if you plan to travel frequently along the Strip.\",\n    \"Avoid gambling if you're on a strict budget.\"\n  ]\n}\n```\n\n**Key Considerations & Explanations:**\n\n*   **Hotel Choices:** I've selected hotels known for being budget-friendly. Prices can vary wildly depending on the time of year and any promotions available. Book in advance for the best rates.  Check for resort fees, which are added on top of the room rate.\n*   **Transportation:** This itinerary emphasizes walking to minimize transportation costs.  For longer distances, consider the bus (Deuce) or rideshares, but be aware of surge pricing.\n*   **Food:** I've included suggestions for affordable eats.  Consider grabbing breakfast at a grocery store or drugstore to save money.  Look for lunch specials.\n*   **Activities:** The itinerary focuses on free attractions like the Bellagio fountains, the Conservatory, the Fremont Street Experience, and free shows.\n*   **Gambling:** I've largely avoided suggesting gambling activities to keep the budget low.\n*   **Flexibility:** This is a suggested itinerary, feel free to adjust it to your interests.\n\n**How to Use the JSON:**\n\n1.  **Parse the JSON:**  You'll need a programming language (like Python, JavaScript, etc.) and a JSON parser to read this data.\n2.  **Display Information:**  Use the parsed data to display hotel options, daily itineraries, and activity details in a user-friendly format.  You can use mapping libraries (like Google Maps API or Leaflet) to display the geo-coordinates on a map.\n3.  **Consider Real-Time Data:** Prices, ratings, and show schedules can change.  Ideally, you'd integrate with live APIs (like those from Google Places, Expedia, etc.) to get up-to-date information.\n4.  **User Customization:**  Allow users to customize the itinerary based on their preferences (e.g., selecting different hotel options, adding/removing activities, adjusting the budget).\n\nRemember to always double-check prices and schedules before your trip, as they can change. Have a great time in Las Vegas!\n"},
          ],
        },
      ],
    });
  
   
  